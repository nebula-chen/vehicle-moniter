<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="UTF-8">
    <title>自动驾驶物流大脑 - 车辆数据统计分析</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="image/logo.ico" type="image/ico" sizes="32x32">
    <link rel="shortcut icon" href="image/logo.ico" type="image/ico">
    <link rel="stylesheet" href="css/secondary-style.css">
    <link rel="stylesheet" href="css/analytics.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <script src="js/echarts.min.js"></script>
    <script src="js/data.js"></script>
    <script src="js/analytics.js" defer></script>
</head>
<body data-page="car-stats">
    <div class="container">
        <!-- 左侧导航栏 -->
        <aside class="sidebar">
            <h2>自动驾驶物流大脑</h2>
            <ul class="nav-list">
                <li class="nav-item" onclick="toggleSub(this)">
                    <span>物流订单</span>
                    <i class="bi bi-chevron-down"></i>
                </li>
                <ul class="sub-list">
                    <li class="sub-item"><a href="orders-manage.html">快递订单管理</a></li>
                    <li class="sub-item"><a href="orders-stats.html">订单数据统计分析</a></li>
                </ul>

                <li class="nav-item" onclick="toggleSub(this)">
                    <span>仓库与门店</span>
                    <i class="bi bi-chevron-down"></i>
                </li>
                <ul class="sub-list">
                    <li class="sub-item"><a href="stations-manage.html">仓库/门店档案</a></li>
                    <li class="sub-item"><a href="stations-io.html">出入库/门店管理</a></li>
                </ul>

                <li class="nav-item" onclick="toggleSub(this)">
                    <span>车辆信息</span>
                    <i class="bi bi-chevron-down"></i>
                </li>
                <ul class="sub-list">
                    <li class="sub-item"><a href="car-manage.html">车辆归档</a></li>
                    <li class="sub-item"><a href="car-tasks.html">车辆任务记录</a></li>
                    <li class="sub-item"><a href="car-stats.html">车辆数据统计分析</a></li>
                </ul>

                <li class="nav-item" onclick="toggleSub(this)">
                    <span>网格员信息</span>
                    <i class="bi bi-chevron-down"></i>
                </li>
                <ul class="sub-list">
                    <li class="sub-item"><a href="gridmember-profile.html">网格人员档案</a></li>
                    <li class="sub-item"><a href="gridmember-tasks.html">网格人员出勤记录</a></li>
                </ul>

                <li class="nav-item" onclick="toggleSub(this)">
                    <span>配送路线</span>
                    <i class="bi bi-chevron-down"></i>
                </li>
                <ul class="sub-list">
                    <li class="sub-item"><a href="route-manage.html">路线信息管理</a></li>
                    <li class="sub-item"><a href="route-scheduling.html">车路管理调度</a></li>
                </ul>

                <li class="nav-item" onclick="toggleSub(this)">
                    <span>异常事件</span>
                    <i class="bi bi-chevron-down"></i>
                </li>
                <ul class="sub-list">
                    <li class="sub-item">事件管理</li>
                    <li class="sub-item">数据统计分析</li>
                </ul>
            </ul>
        </aside>
        <div class="sidebar-footer">
            <a class="btn-return" href="car-screen.html"><i class="bi bi-house-door"></i></a>
        </div>

        <!-- 主体：统计面板 -->
        <div class="main">
            <h1>车辆数据统计分析</h1>
            <!-- 第一行：统计卡片（左）与饼图（右） -->
            <div class="top-row" style="display:flex;gap:var(--spacing-lg);margin-top:var(--spacing-md);align-items:flex-start;flex-wrap:wrap;">
                <!-- 统计卡片（左列） -->
                <div class="stats-column" style="flex:1 1 360px;min-width:260px;display:flex;flex-direction:column;gap:var(--spacing-md);">
                    <div style="display:flex;gap:var(--spacing-md);flex-wrap:wrap;">
                        <div class="stat-card" style="flex:1 1 160px;border:1px solid var(--border-color);padding:var(--spacing-md);border-radius:var(--radius-md);background:#fff;">
                            <div>设备总数</div>
                            <div id="deviceTotalLabel">-</div>
                        </div>
                        <div class="stat-card" style="flex:1 1 160px;border:1px solid var(--border-color);padding:var(--spacing-md);border-radius:var(--radius-md);background:#fff;">
                            <div>在线车辆数</div>
                            <div id="onlineCountLabel">-</div>
                        </div>
                    </div>
                    <div style="display:flex;gap:var(--spacing-md);">
                        <div class="stat-card" style="flex:1 1 160px;border:1px solid var(--border-color);padding:var(--spacing-md);border-radius:var(--radius-md);background:#fff;">
                            <div>运营车辆数</div>
                            <div id="operateCountLabel">-</div>
                        </div>
                        <div class="stat-card" style="flex:1 1 160px;border:1px solid var(--border-color);padding:var(--spacing-md);border-radius:var(--radius-md);background:#fff;">
                            <div>异常车辆数</div>
                            <div id="abnormalCountLabel">-</div>
                        </div>
                    </div>
                    <div style="display:flex;gap:var(--spacing-md);margin-top:8px;">
                        <div class="stat-card" style="flex:1 1 160px;border:1px solid var(--border-color);padding:var(--spacing-md);border-radius:var(--radius-md);background:#fff;">
                            <div>车辆出勤次数</div>
                            <div id="attendanceCountLabel">-</div>
                        </div>
                        <div class="stat-card" style="flex:1 1 160px;border:1px solid var(--border-color);padding:var(--spacing-md);border-radius:var(--radius-md);background:#fff;">
                            <div>车辆运行总里程</div>
                            <div id="mileageLabel">-</div>
                        </div>
                    </div>
                </div>

                <!-- 饼图（右列）: 车辆类型 & 出勤状态 -->
                <div class="pies-column" style="flex:1 1 360px;min-width:260px;display:flex;flex-direction:column;gap:var(--spacing-md);">
                    <div class="pies-wrapper">
                        <div id="pieCategoryChart" class="chart-box chart-box-pie"></div>
                        <div id="pieStatusChart" class="chart-box chart-box-pie"></div>
                    </div>
                    <div style="display:flex;gap:var(--spacing-md);margin-top:8px;">
                        <div class="stat-card" style="flex:1 1 160px;border:1px solid var(--border-color);padding:var(--spacing-md);border-radius:var(--radius-md);background:#fff;">
                            <div>充电桩数量</div>
                            <div id="chargePileLabel">-</div>
                        </div>
                        <div class="stat-card" style="flex:1 1 160px;border:1px solid var(--border-color);padding:var(--spacing-md);border-radius:var(--radius-md);background:#fff;">
                            <div>换电柜数量</div>
                            <div id="swapCabinetLabel">-</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 第三行：两张主图：车辆出勤统计（左）与车辆载货统计（右） -->
            <div class="charts-flex" style="margin-top:var(--spacing-lg);">
                <div class="chart-box" style="height: 36vh;">
                    <div class="chart-title-row">
                        <div>车辆出勤统计</div>
                        <div id="totalModeBtns" style="display:flex;gap:var(--spacing-xs);margin-right: 2%;">
                            <button class="mode-btn" data-mode="day">日</button>
                            <button class="mode-btn" data-mode="month">月</button>
                            <button class="mode-btn" data-mode="year">年</button>
                        </div>
                    </div>
                    <div id="totalChart" style="width:100%;min-height:320px;height:min(56vh, calc((100vh - 220px) / 2));"></div>
                </div>
                <div class="chart-box" style="height: 36vh;">
                    <div class="chart-title-row">
                        <div>车辆载货统计</div>
                        <div id="typeModeBtns" style="display:flex;gap:var(--spacing-xs);margin-right: 2%;">
                            <button class="mode-btn" data-mode="day">日</button>
                            <button class="mode-btn" data-mode="month">月</button>
                            <button class="mode-btn" data-mode="year">年</button>
                        </div>
                    </div>
                    <div id="typeChart" style="width:100%;min-height:320px;height:min(56vh, calc((100vh - 220px) / 2));"></div>
                </div>
            </div>

        </div>
    </div>
</body>
</html>
