<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="UTF-8">
    <title>自动驾驶物流大脑 - 车辆归档</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- favicon: 在标签页显示 logo -->
    <link rel="icon" href="image/logo.ico" type="image/ico sizes="32x32">
    <link rel="shortcut icon" href="image/logo.ico" type="image/ico">
    <link rel="stylesheet" href="css/secondary-style.css">
    <script src="js/data.js"></script>
    <!--加载高德地图插件-->
    <script src="https://webapi.amap.com/maps?v=2.0&key=0ab0f0b45664f7b5d7f3030df28d12f0&plugin=AMap.Scale,AMap.ToolBar,AMap.MapType,Map3D,AMap.Buildings"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <script src="js/secondary.js"></script>
</head>
<body>
    <div class="container" data-page="car-manage">
        <!-- 左侧导航栏 -->
        <aside class="sidebar">
            <h2>自动驾驶物流大脑</h2>
            <ul class="nav-list">
                <li class="nav-item" onclick="toggleSub(this)">
                    <span>物流订单</span>
                    <i class="bi bi-chevron-down"></i>
                </li>
                <ul class="sub-list">
                    <li class="sub-item"><a href="orders-manage.html">快递订单管理</a></li>
                    <li class="sub-item"><a href="orders-stats.html">订单数据统计分析</a></li>
                </ul>

                <li class="nav-item" onclick="toggleSub(this)">
                    <span>仓库与门店</span>
                    <i class="bi bi-chevron-down"></i>
                </li>
                <ul class="sub-list">
                    <li class="sub-item"><a href="stations-manage.html">仓库/门店档案</a></li>
                    <li class="sub-item"><a href="stations-io.html">出入库/门店管理</a></li>
                </ul>

                <li class="nav-item" onclick="toggleSub(this)">
                    <span>车辆信息</span>
                    <i class="bi bi-chevron-down"></i>
                </li>
                <ul class="sub-list">
                    <li class="sub-item"><a href="car-manage.html">车辆归档</a></li>
                    <li class="sub-item"><a href="car-tasks.html">车辆任务记录</a></li>
                    <li class="sub-item">车辆数据统计分析</li>
                </ul>

                <li class="nav-item" onclick="toggleSub(this)">
                    <span>网格员信息</span>
                    <i class="bi bi-chevron-down"></i>
                </li>
                <ul class="sub-list">
                    <li class="sub-item"><a href="gridmember-profile.html">网格人员档案</a></li>
                    <li class="sub-item">网格人员出勤记录</li>
                </ul>

                <li class="nav-item" onclick="toggleSub(this)">
                    <span>配送路线</span>
                    <i class="bi bi-chevron-down"></i>
                </li>
                <ul class="sub-list">
                    <li class="sub-item"><a href="route-manage.html">路线信息管理</a></li>
                    <li class="sub-item"><a href="route-scheduling.html">车路管理调度</a></li>
                </ul>

                <li class="nav-item" onclick="toggleSub(this)">
                    <span>异常事件</span>
                    <i class="bi bi-chevron-down"></i>
                </li>
                <ul class="sub-list">
                    <li class="sub-item">事件管理</li>
                    <li class="sub-item">数据统计分析</li>
                </ul>
            </ul>
        </aside>
        <div class="sidebar-footer">
            <a class="btn-return" href="car-screen.html"><i class="bi bi-house-door"></i></a>
        </div>
        <!-- 主体内容 -->
        <div class="main">
            <h1>车辆归档</h1>
            <!-- 检索筛选区 -->
            <form class="filter-bar" id="filterForm" onsubmit="event.preventDefault();filterCar();">
                <input type="text" id="filter-id" placeholder="车辆编号">
                <input type="text" id="filter-route" placeholder="所属路线编号">
                <select id="filterStatus">
                    <option value="">状态</option>
                    <option value="空闲">空闲</option>
                    <option value="配送中">配送中</option>
                    <option value="已完成">已完成</option>
                    <option value="充电中">充电中</option>
                    <option value="异常">异常</option>
                </select>
                <button type="submit">查询</button>
            </form>
            <section class="panel-body">
                <div class="table-wrap">
                    <table id="table">
                        <thead>
                            <tr>
                                <th>车辆ID</th>
                                <th>类型</th>
                                <th>状态</th>
                                <th>容量</th>
                                <th>剩余电量</th>
                                <th>所属线路</th>
                                <th>录入时间</th>
                                <th> </th>
                            </tr>
                        </thead>
                        <tbody id="table-body">
                            <tr class="table-empty"><td colspan="8">暂无数据，调整筛选或点击右下角“+”添加。</td></tr>
                        </tbody>
                    </table>
                </div>
            </section>
            <button id="btn-add" class="floating-add" title="createCar">
                <i class="bi bi-plus-lg"></i>
            </button>
        </div>
    </div>
    <!-- 车辆详情侧栏（用于显示单车详细信息） -->
    <aside id="detail-panel" class="detail-panel" aria-hidden="true" style="transform: translateX(100%);">
        <button id="detail-close" class="detail-close" aria-label="关闭详情">×</button>
        <div id="detail-content" class="detail-content" style="padding:16px; overflow:auto;">
            <!-- 详情由 secondary.js 动态渲染 -->
        </div>
    </aside>

    <!-- 新增车辆模态（默认隐藏） -->
    <div id="modal-create-vehicle" class="modal" aria-hidden="true" style="display:none;">
        <div class="modal-backdrop" id="modal-backdrop" style="position:fixed;inset:0;background:rgba(0,0,0,0.4);"></div>
        <div class="modal-dialog" style="position:fixed;left:50%;top:50%;transform:translate(-50%,-50%);background:#fff;border-radius:6px;max-width:520px;width:90%;box-shadow:0 6px 20px rgba(0,0,0,0.2);z-index:1000;">
            <div style="padding:16px;border-bottom:1px solid #eee;display:flex;justify-content:space-between;align-items:center;">
                <h3 style="margin:0;font-size:16px;">创建车辆</h3>
                <button id="modal-close" aria-label="关闭" style="background:none;border:0;font-size:20px;line-height:1;">&times;</button>
            </div>
            <form id="createVehicleForm" style="padding:12px;">
                <!-- 中文注释：表单字段对应后端 CreateVehicleReq；vehicleId 由服务端自动生成，前端无需填写 -->
                <div style="display:flex;flex-direction:column;gap:8px;">
                    <input id="cv-plateNumber" name="plateNumber" placeholder="车牌号" />
                    <!-- 车型值为整数：0 普通车,1 大型车,2 冷藏车,3 冷冻车；Type/TotalCapacity/BatteryInfo 为必填（整数） -->
                    <select id="cv-type" name="type">
                        <option value="">-- 请选择车型（必填） --</option>
                        <option value="0">普通车</option>
                        <option value="1">大型车</option>
                        <option value="2">冷藏车</option>
                        <option value="3">冷冻车</option>
                    </select>
                    <input id="cv-totalCapacity" name="totalCapacity" placeholder="总容量（立方米，整数，必填）" inputmode="numeric" />
                    <input id="cv-batteryInfo" name="batteryInfo" placeholder="电池信息（百分比 0-100，整数，必填）" inputmode="numeric" />
                    <input id="cv-routeId" name="routeId" placeholder="所属路线ID" />
                    <textarea id="cv-extra" name="extra" placeholder="备注/扩展信息（可选）" rows="3"></textarea>
                </div>
                <div style="display:flex;justify-content:flex-end;gap:8px;margin-top:12px;">
                    <button type="button" id="cv-cancel" style="padding:8px 12px;border-radius:4px;background:#f3f3f3;border:1px solid #ddd;">取消</button>
                    <button type="submit" id="cv-submit" style="padding:8px 12px;border-radius:4px;background:#2d7cf3;color:#fff;border:0;">创建</button>
                </div>
            </form>
        </div>
    </div>
</body>
</html>