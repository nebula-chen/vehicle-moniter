<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="UTF-8">
    <title>无人车数据大屏 - 网联末端物流</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/car-screen.css">
    <link rel="stylesheet" href="css/order-panel.css">
    <link rel="stylesheet" href="css/warehouse-panel.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <script src="js/echarts.min.js"></script>
    <script src="https://webapi.amap.com/maps?v=2.0&key=c9e8ebb3f3c7ada55ea870cd341d7c36&plugin=AMap.Scale,AMap.ToolBar,AMap.MapType,AMap.Map3D,AMap.Buildings"></script>
    <script src="js/data.js"></script>
    <script src="js/500106_500107_streets.js"></script>
    <script src="js/car-screen.js" defer></script>
    <script src="js/order-panel.js" defer></script>
    <script src="js/floating-panel.js" defer></script>
</head>
<body>
    <div class="top-title">自动驾驶物流大脑</div>

    <!-- 左侧竖向统计栏 -->
    <div class="left-panels">
        <div class="panel u-neon-fixed" style="height: 40%;">
            <!-- 指标区域：两个容器上下排列，每个容器内指标同行 -->
            <div style="display: flex; margin: 0px 6px; margin-top: 16px;">
                <div class="metric" id="order-total">
                    <span class="summary-label">订单总数</span>
                    <span class="summary-num">--</span>
                </div>
                <div class="metric" id="order-finished">
                    <span class="summary-label">今日已完成</span>
                    <span class="summary-num">--</span>
                </div>
            </div>
            <div style="display: flex; margin: 0px 6px; margin-top: 8px;">
                <div class="metric" id="order-intransit">
                    <span class="summary-label">在途订单</span>
                    <span class="summary-num">12</span>
                </div>
                <div class="metric" id="order-abnormal">
                    <span class="summary-label">异常订单</span>
                    <span class="summary-num">2</span>
                </div>
            </div>

            <div class="table-section">
                <!-- 列表表头：订单、类型、目的地、状态、备注 -->
                <div class="route-list-header" style="width: 96.5%; margin-top:12px; display: flex;">
                        <div style="flex:1.2; text-align:center;">订单</div>
                        <div style="flex:1; text-align:center;">类型</div>
                        <div style="flex:2; text-align:center;">目的地</div>
                        <div style="flex:1; text-align:center;">状态</div>
                        <div style="flex:2; text-align:center;">备注</div>
                </div>
                <ul id="orderListChart" class="list"></ul>
            </div>
        </div>
        <div class="panel u-neon-fixed" id="warehouse-panel" style="height: 50%; padding: 18px 12px 12px 12px; display: flex; flex-direction: column; gap: 10px;">
            <!-- 优化后的仓库门店信息面板组件 -->
            <div class="warehouse-panel-top" style="display: flex; gap: 6px; justify-content: space-between; margin: 10px 8px;">
                <div class="warehouse-stat laser-blue-border">
                    <div class="warehouse-stat-title"><i class="bi bi-building"></i> 仓库</div>
                    <div class="warehouse-stat-value" id="warehouse-total">50</div>
                </div>
                <div class="warehouse-stat laser-blue-border">
                    <div class="warehouse-stat-title"><i class="bi bi-shop"></i> 驿站/门店</div>
                    <div class="warehouse-stat-value" id="station-store-total">18</div>
                </div>
            </div>
            <div class="warehouse-panel-body" style="flex:1; display:flex;">
                <div class="warehouse-map-card" style="flex:1; display:flex; flex-direction:column; box-shadow:0 4px 24px rgba(30,150,255,0.10); border-radius:12px; padding:10px 10px 6px 10px;">
                    <div class="warehouse-map-card-title" style="display:flex; align-items:center; justify-content:space-between; margin-bottom:6px;">
                        <span><i class="bi bi-geo-alt"></i>站点预览</span>
                            <span class="warehouse-map-legend" style="font-size:12px; display:flex; align-items:center; gap:10px;">
                                <span class="legend-dot warehouse" style="display:inline-block; width:12px; height:12px; border-radius:50%; background:#4fc3f7; margin-right:3px;"></span>仓库
                                <span class="legend-dot store" style="display:inline-block; width:12px; height:12px; border-radius:50%; background:#fffb00; margin-right:3px;"></span>驿站/门店
                            </span>
                        </span>
                    </div>
                    <div id="warehouse-mini-map" class="warehouse-mini-map" style="flex:1; min-height:120px; border-radius:8px; border:1px solid rgba(255,255,255,0.03); overflow:hidden;"></div>
                </div>
            </div>
            <script src="js/warehouse-panel.js"></script>
        </div>
    </div>

    <!-- 主体区域（地图/可视化） -->
    <div class="center-area">
        <!-- 浮动选择面板，左上角 -->
        <div class="floating-panel" id="floatingPanel">
            <div class="panel-group">
                <label class="panel-checkbox">
                    <input type="checkbox" checked data-type="cargo"> 货物
                </label>
                <label class="panel-checkbox">
                    <input type="checkbox" checked data-type="vehicle"> 车辆
                </label>
            </div>
            <div class="panel-group">
                <label class="panel-checkbox">
                    <input type="checkbox" checked data-type="warehouse"> 仓库
                </label>
                <label class="panel-checkbox">
                    <input type="checkbox" checked data-type="store"> 门店
                </label>
            </div>
            <div class="panel-group panel-label">
                总线路 <span class="panel-value">999</span>
            </div>
            <div class="panel-group">
                <label class="panel-checkbox">
                    <input type="checkbox" checked data-type="operation"> 运营线路
                    <span class="panel-value">99</span>
                </label>
            </div>
            <div class="panel-group">
                <label class="panel-checkbox">
                    <input type="checkbox" checked data-type="test"> 测试线路
                    <span class="panel-value">99</span>
                </label>
            </div>
        </div>
        <div class="visual">
            <div class="map-3d-wrap">
                <div id="mapContainerEcharts" class="mini-canvas placeholder">
                    <!-- 高德地图容器：initMap() 将在此容器中初始化 AMap 实例 -->
                    <div id="amapCar" style="width:100%;height:100%;"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- 右侧面板 -->
    <div class="right-panels">
        <div class="panel u-neon-fixed" style="height: 58%;">
            <!-- 车辆信息子面板嵌入 -->
            <div id="vehicle-info-panel-container"></div>
            <link rel="stylesheet" href="css/vehicle-info-panel.css">
            <script src="js/vehicle-info-panel.js"></script>
        </div>
        <div class="panel u-neon-fixed" style="height: 36%; display: flex; flex-direction: column; justify-content: center; align-items: stretch; padding: 0;">
            <!-- 网格员信息面板组件 -->
            <link rel="stylesheet" href="css/grid-info-panel.css">
            <div class="grid-panel" id="grid-info-panel">
                <div class="grid-panel-header">
                    <span class="grid-panel-title">网格员总数：<span class="grid-panel-value" id="total-count">99</span></span>
                    <button class="grid-panel-distribution" id="distribution-btn">网格分布</button>
                </div>
                <div class="grid-panel-row">
                    <span class="grid-panel-label">在线网格员数：</span>
                    <span class="grid-panel-value" id="online-count">60</span>
                </div>
                <div class="grid-panel-row">
                    <span class="grid-panel-label">空闲网格员数：</span>
                    <span class="grid-panel-value" id="idle-count">20</span>
                </div>
                <div class="grid-panel-row">
                    <span class="grid-panel-label">离线网格员数：</span>
                    <span class="grid-panel-value" id="offline-count">5</span>
                </div>
            </div>
            <script src="js/grid-info-panel.js"></script>
        </div>
    </div>
</body>
</html>

